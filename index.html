<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Project Baguette</title>
  <link rel="icon" type="image/png" href="assets/favicon.png">

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.2/p5.min.js"></script>

  <style>
    #bg-canvas-holder canvas{
      position:absolute !important;
      inset:0 !important;
      width:100% !important;
      height:100% !important;
      z-index:0 !important;
    }
  </style>
</head>

<body class="bg-slate-950 text-white overflow-hidden">

  <div id="bg-canvas-holder" class="fixed inset-0"></div>
  <div class="fixed inset-0 bg-slate-950/60 z-10"></div>

  <div id="menu-root" class="relative z-20 min-h-screen flex">
    <aside class="w-[360px] max-w-[90vw] border-r border-white/10 bg-slate-900/50 backdrop-blur-xl">
      <div class="p-4 border-b border-white/10">
        <div class="text-2xl font-extrabold tracking-tight">Project Baguette</div>
        <div class="text-xs text-white/60 mt-1">↑/↓ song • ←/→ diff • Enter start</div>
      </div>

      <div class="p-3">
        <input id="search"
          class="w-full px-3 py-2 rounded-xl bg-white/5 border border-white/10 outline-none
                 focus:border-white/30 focus:bg-white/10 text-sm"
          placeholder="Search songs..."
          autocomplete="off"
        />
      </div>

      <div id="songList" class="px-2 pb-3 overflow-auto h-[calc(100vh-148px)]"></div>
    </aside>

    <main class="flex-1 flex flex-col">
      <header class="p-4 flex items-center justify-between">
        <div class="flex items-center gap-3">
          <div class="w-2 h-2 rounded-full bg-emerald-400"></div>
          <div class="text-sm text-white/70">Main Menu</div>
        </div>
      </header>

      <section class="flex-1 grid grid-cols-12 gap-4 px-4 pb-4">
        <div class="col-span-12 xl:col-span-7 rounded-2xl border border-white/10 bg-slate-900/40 backdrop-blur-xl p-5">
          <div class="flex items-start justify-between gap-4">
            <div>
              <div id="songTitle" class="text-3xl font-extrabold tracking-tight">—</div>
              <div id="songArtist" class="text-sm text-white/70 mt-1">—</div>
            </div>

            <div class="text-right">
              <div class="text-xs text-white/50">BPM</div>
              <div id="songBpm" class="text-lg font-semibold">—</div>
            </div>
          </div>

          <div class="mt-5">
            <div class="text-xs text-white/50 mb-1">Selected Difficulty</div>
            <div id="songDiff" class="text-base font-semibold">—</div>
          </div>
        </div>

        <div class="col-span-12 xl:col-span-5 rounded-2xl border border-white/10 bg-slate-900/40 backdrop-blur-xl p-5">
          <div class="text-xl font-bold">Play</div>
          <div class="mt-4 flex flex-col gap-3">
            <button id="btnStart"
              class="px-4 py-3 rounded-2xl bg-emerald-500/90 hover:bg-emerald-400 text-slate-950 font-bold">
              Start (Enter)
            </button>

            <div class="rounded-2xl bg-white/5 border border-white/10 p-4">
              <div class="text-sm font-semibold">Difficulty Select</div>
              <div class="mt-3 flex flex-wrap gap-2" id="diffButtons"></div>
            </div>

            <div class="text-xs text-white/50">
              UI calls <span class="font-mono text-white/80">PBEngine.setSong()</span> and <span class="font-mono text-white/80">PBEngine.start()</span>.
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <div id="game-root" class="fixed inset-0 z-20 hidden">
    <video id="mv" class="fixed inset-0 w-full h-full object-cover" muted playsinline></video>
    <canvas id="game" class="fixed inset-0 w-full h-full"></canvas>
    <audio id="song" preload="auto"></audio>
  </div>

  <script>
    // Tell engine to suppress tap overlay and be menu-driven
    window.__PB_MENU_MODE__ = true;
  </script>

  <script src="js/p5bg.js"></script>
  <script src="js/engine.js"></script>
  <script src="js/menu.js"></script>
</body>
</html>
